# 文芸用マークアップ言語 (寝言)

この記事は[進捗 Advent Calendar 2020](https://github.com/t-sin/shinchoku-advent-calendar-2020)の13日目の記事です。

## 概要

記述文書ではなく文芸のためのマークアップ言語がほしくて試行錯誤していた時期があったのでそれについて書きます。

## 背景

一時期小説を書くことが趣味で、ウェブページにHTMLファイルをアップロードしていたことがありました。本を読むのは好きですし、小説もとくにSF小説なんかは大好きなので書いてみていたというわけです。

小説ってテキストエディタひとつがあれば書けるかなぁとなんとなく始めたんですが、なにかしらのフォーマットで公開するとなると変換作業が必要になります。対象をHTMLとすると、プレーンなテキストファイルと改行の位置を同じにするために`<br>`タグを入れなければなりません。たいてい作品のページはテンプレートがあるので、テンプレートエンジン的なものがほしくなります。紙の本を読んでいると、短編の題名や章題、段落の字下げや引用のインデントなど配置に関する構造や、傍点やルビ、作品によってはフォントの変更 (『ハリー・ポッター』シリーズ) や、文字色や文字背景色の変更 ([円城塔『後藤さんのこと』](https://www.amazon.co.jp/dp/4150310629)) などの表現があり、脚注やコラムなど文書構造に関わる要素なんかもあったりします。また記述という文脈では、改行や空白文字って複数の意味があるよね、という話もあり

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">文章の構造としての改行と、レイアウトの構造としての改行が区別されていない現象に遭遇して腕を組んでいる。</p>&mdash; EnJoe140で短編中 (@EnJoeToh) <a href="https://twitter.com/EnJoeToh/status/442168053183152128?ref_src=twsrc%5Etfw">March 8, 2014</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

このツイートに対しぼくは首を激しく縦に振った記憶があります。まあフォントの変更や色の変更は忘れるとしても、HTMLやLaTeXなどの形式に依存しない記法が真剣にほしかった時期があった、というのが本記事の背景です。

## 試行錯誤

というわけで文芸用 (というのは文芸的プログラミング literate programming と区別するために「用」と言ってます) マークアップ言語ほしいなあという欲望がありました。言語の設計すら進まなかったリポジトリはこちらです。

https://github.com/t-sin/hearn

設計すら進まなかったのは、自分がこの言語に何を求めているのかわからなかったからです。その下準備として、多数の文学作品を収める青空文庫のマークアップ言語を調査してみるのはアリなのでは、と思ってつくっていたリポジトリはこちらです。

https://github.com/t-sin/cl-aozora

目的が青空文庫のパースをすることではなかったため頓挫しました。モチベーション管理ってむずかしいですね。

また、ここではないどこかで、校正用のマークアップ言語とビューアをつくりたいと思っていた時期もありました。この話は「文芸の世界でバージョン管理が普及しない問題」の円城塔氏のツイートに関わる議論の中でもちょっと出てきています。

https://togetter.com/li/1623435

(というか何年か前にも円城さんは同じことを言っていたのと、[著書の『プロローグ』](https://www.amazon.co.jp/dp/4167910195)にも似た話が出てくるので、わりと既出な話ではあるのですが。)

ちなみにその試行錯誤の結果として、文字コードをCommon Lispで処理系非依存に扱いたくて[文字コード判定ライブラリinquisitor](https://github.com/t-sin/inquisitor)ができたり、小説のメタデータを本文のマークアップ言語と切り離して記述したくて[テキストデータのメタデータ記述言語Rosa](https://github.com/t-sin/rosa)ができたりする程度にはがんばっていました。

## 結論

今では小説を書くことはなくなったのでこれらの問題について考えることもなくなってしまいました。現在では、いくつかのエディタがそのような構造的な言語を導入していたり (例: [TateEditor](https://www.cc4966.net/)、 小説投稿サービス (pixivや、そのほか) がそのような記法を用意していたりするので、あまり考える必要もなくなってきたようです。Asciidocとかでよくね、という気持ちもしてきています。

## 余談

なんだかこのところ「昔やろうとした」「だけど失敗した」「だけど完成しなかった」のような、武勇伝のようでぜんぶ失敗してることばかりを書いている気がして若干ブルーになってきました。っていうか本記事に至っては黒歴史レベルでしょ。まだ進捗アドベントカレンダーの中間地点なのにだいじょうぶなのか。このアドベントカレンダーは完走するのか。死なないで城之内！
